<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.broker.mapper.BrokerListingMapper">

<select id="selectLstgListByMbrCd" parameterType="String" resultType="ListingVO">
	WITH TENANCY_LIST AS(
	    SELECT *
	      FROM TENANCY T
	     INNER JOIN MEMBER M ON(T.MBR_CD = M.MBR_CD)
	)
	SELECT *
	  FROM LISTING L
	  LEFT OUTER JOIN TENANCY_LIST V ON(L.RENTAL_PTY_ID = V.RENTAL_PTY_ID)
	WHERE L.MBR_CD = #{mbrCd}
	ORDER BY LSTG_TYPE_CODE ASC
</select>

</mapper>